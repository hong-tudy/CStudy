# 9단원+10단원 운영체제란, 프로세스와 스레드

**운영체제란 무엇입니까?**

- 컴퓨터 시스템의 핵심 소프트웨어로, 컴퓨터 하드웨어와 응용 프로그램 간의 상호작용을 관리하고 제어하는 역할을 합니다. 컴퓨터가 부팅될 때 메모리 내 커널 영역이라는 공간에 따로 적재되어 실행되며 자원 관리, 메모리 관리, 프로세스 관리를 합니다. 대표적인 운영체제로는 유닉스, 리눅스, 윈도우와 같은 운영체제가 있습니다.

**커널이 무엇인지 설명하실 수 있나요?**

- 커널이란 운영체제의 핵심 서비스를 담당하는 부분으로 하드웨어와 소프트웨어 사이의 인터페이스를 제공하고 컴퓨터 자원을 관리하는 부분입니다.

**메모리의 구조를 영역에 따라서 설명해줄 수 있나요?**

- 메모리는 크게 커널 영역과 사용자 영역으로 나뉩니다. 커널 영역에서는 자원에 접근하는 운영체제 코드가 실행되고, 사용자 영역에서는 응용 프로그램이 적재되어 실행됩니다. 응용 프로그램은 메모리에서 코드, 데이터, 힙, 스택 영역으로 나뉘어 할당받습니다.

**메모리의 힙 영역과 스택 영역의 차이에 대해 설명해주세요.**

- 동적 메모리 할당을 위해 사용됩니다. 즉, 실행 시간(runtime) 동안 프로그래머가 직접 할당하고 해제할 수 있는 메모리입니다. 주로 객체나 동적으로 크기가 결정되는 데이터를 저장하는 데 사용됩니다. 할당된 메모리를 해제하지 않으면 메모리 누수가 발생할 수 있습니다.
- 함수 호출과 관련된 데이터를 저장하기 위해 사용됩니다. 여기에는 지역 변수, 함수 매개 변수, 리턴 주소 등이 포함됩니다

**메모리의 힙 영역을 너무 크게 잡으면 어떤 일이 생길까요?**

- 메모리의 힙 영역을 너무 크게 잡으면 시스템의 물리적 메모리가 부족해져 성능 저하가 발생하고, 다른 프로세스에 영향을 미칠 수 있습니다. 또한, 메모리 파편화로 인해 큰 메모리 블록을 할당하기 어려워질 수 있으며, 가비지 컬렉션 시간이 길어져 응답성이 저하될 수 있습니다.

**컨텍스트 스위칭에 대해서 설명하고, 왜 컨텍스트 스위칭이 필요한지 설명해주세요.**

- 컨텍스트 스위칭은 실행 중인 프로세스의 상태를 저장하고, 다른 프로세스의 상태를 복원하여 CPU가 여러 프로세스를 번갈아 가며 실행할 수 있도록 하는 과정입니다. 실행되던 프로세스의 CPU 할당 시간이 끝나고 타임 인터럽트가 발생하면, 현재 프로세스의 상태(컨텍스트)를 프로세스 제어 블록(PCB)에 저장합니다. 다음에 실행될 프로세스는 해당 프로세스의 PCB로부터 이전 상태를 복구하여 이어서 작업을 계속합니다.

컨텍스트 스위칭이 없으면 하나의 프로세스의 작업이 완료될때까지 다른 프로세스는 CPU를 할당받을 수 없습니다

- **꼬리질문**
    - **프로세스와 스레드는 컨텍스트 스위칭이 발생했을 때 어떤 차이가 있을까요?**
        - 프로세스 컨텍스트 스위칭은 독립된 메모리 공간과 더 많은 상태 정보를 저장 및 복원해야 하므로 오버헤드가 크고, 캐시 무효화로 인한 성능 저하가 발생할 수 있습니다. 반면, 스레드 컨텍스트 스위칭은 동일한 메모리 공간을 공유하여 메모리 주소 공간 교체가 필요 없고, 데이터 공유가 용이하여 상대적으로 오버헤드가 적습니다.
    - **컨텍스트 스위칭이 발생할 때, 기존의 프로세스 정보는 커널스택에 어떠한 형식으로 저장되나요?**
        - 컨텍스트 스위칭이 발생할 때, 기존의 프로세스 정보는 다음과 같은 형식으로 커널 스택에 저장됩니다: CPU의 레지스터 상태(예: 일반 목적 레지스터 값들, 프로그램 카운터(PC), 스택 포인터(SP), 플래그 레지스터 등)가 순차적으로 저장되며, 이어서 프로세스 제어 블록(PCB)에 있는 프로세스 상태와 관련된 정보(프로세스 ID, 상태 정보, 메모리 관리 정보 등)가 추가로 저장됩니다.

**인터럽트가 무엇입니까? 왜 사용합니까? 인터럽트 발생 시 수행 과정을 간략히 말해 보세요. (인터럽트 서비스 루틴)**

- 인터럽트란 CPU가 프로그램을 실행 중일 때 입출력 장치에 의한 예외상황이 발생한 경우, 프로세스를 중단하고 마이크로 프로세스를 통해 처리하는 것을 의미합니다. 인터럽트는 특정 이텐트가 발생했을때 즉시 처리하기 때문에 지속적인 감시가 필요하지 않기 때문에 효율적인 시스템 자원 관리가 가능합니다.
- 인터럽트가 발생하면 현재 작업 중단 및 상태를 저장하고 인터럽트 벡터 테이블을 참조하여 발생한 인터럽트에 해당하는 인터럽트 서비스 루틴(ISR)의 주소를 확인하여 해당 인터럽트 서비스 루틴를 실행하고 기존에 실행하던 응용 프로그램으로 복귀하여 실행을 계속합니다.

**프로그램과 프로세스의 차이에 대해 설명해주세요.**

- 프로그램은 특정 작업을 수행하기 위해 작성된 코드의 집합입니다. 프로그램이 실행되기 위해 메모리에 적재된 상태를 프로세스라고 합니다. 프로세스는 컴퓨터의 자원을 할당받으며 운영 체제에 의해 관리되어 실행, 중지, 대기 등의 상태를 거치면서 작업을 수행합니다.

**멀티 프로세스로 처리 가능한 걸 굳이 멀티 스레드로 하는 이유는?**

- 멀티프로세스로 처리 가능한 것을 멀티스레드로 처리하는 이유는 스레드는 동일한 메모리 공간을 공유하여 메모리 사용의 효율성을 높이고, 컨텍스트 스위칭 오버헤드가 적으며, 데이터 공유가 용이해 성능을 향상시키고 개발 및 유지보수가 용이하기 때문입니다.

**프로세스를 설명해 주세요.**

- 보조기억장치에 저장되어 있는 프로그램을 메모리에 적재하고 실행하는 순간 프로세스가 됩니다.

**시스템 콜(system call)이 무엇인가요?**

- 응용프로그램이 운영체제 서비스를 제공받아 자원에 접근하기 위해 실행하는 일종의 인터럽트입니다. 시스템 콜을 통해 사용자 모드에서 커널 모드로 전환하여 운영체제의 서비스를 제공받을 수 있습니다.

**프로세스의 상태변화에 대해 말씀해 주세요**

- 프로세스가 가질 수 있는 상태를 말하자면, 생성 단계 → (레디 → 러닝 → 웨이트) → 종료 로 말할 수 있습니다. 레디 큐에 있던 프로세스가 디스패쳐에 의해 CPU를 할당받게 되면 그 프로그램은 실행을 시작하게 됩니다. 이것은 실행 큐에 담깁니다. 만약 입출력 작업이나 Event 등이 발생하게 되면 실행 큐에서 실행 중이던 프로세스는 wait 큐로 이동합니다. 작업이 모두 끝나면 다시 레디 큐로 가서 할당받기를 대기하게 됩니다

**PCB가 무엇입니까?**

- 운영체제는 빠르게 번갈아 수행되는 프로세스의 실행 순서를 관리하고, 프로세스에 CPU를 비롯한 자원을 분배 합니다. 이 때 프로세스를 식별하기 위해 PCB를 사용합니다.
- PCB는 프로세스 관련된 정보를 저장하는 자료구조입니다.

**문맥 교환(Context-switching)이란 무엇인가요?**

기존 프로세스 문맥을 PCB에 백업하고, 새로운 프로세스를 실행하기 위해 문맥을 PCB로부터 복구하여 새로운 프로세스를 실행하는 것을 말합니다. 문맥 교환을 자주하면 오버헤드가 발생합니다.

**멀티 프로세스와 멀티 스레드의 특징에 대해 설명해주세요.**

- 멀티 프로세스는 독립된 메모리 공간을 사용하여 안정성이 높지만 자원 사용과 통신이 무겁습니다. 멀티 스레드는 동일한 메모리 공간을 공유하여 빠른 통신이 가능하지만 안정성이 낮고 동기화 문제를 주의해야 합니다.

**멀티 쓰레드 환경에서 주의사항을 설명해주세요**

- 다수의 쓰레드가 공유 데이터에 동시에 접근하는 경우에 상호배제 또는 동기화 기법을 통해 동시성 문제 또는 교착 상태가 발생하지 않도록 주의해야 합니다.
- **꼬리 질문**
    - **상호 배제를 설명해주세요.**
    - **동기화 기법을 설명해주세요.**
    - **교착 상태가 무엇인지 설명해주세요.**

**ipc가 무엇이고, 어떤 종류가 있는지 설명해주세요.**

- 프로세스들 사이에 서로 데이터를 주고받는 행위 또는 그에 대한 방법이나 경로를 말합니다.
- pipe, messaging queue, 공유 메모리, 소켓 등이 있습니다.
- **꼬리 질문**
    - **Shared Memory가 무엇이며, 사용할 때 유의해야 할 점에 대해 설명해 주세요.**
    - **메시지 큐는 단방향이라고 할 수 있나요?**

**멀티 쓰레드의 동시성과 병렬성을 설명해주세요.**

- 동시성 : 싱글 코어에서 멀티 쓰레드를 동작시키기 위한 방식입니다. 실제 코어는 하나이지만, 멀티 태스킹을 위해 여러 개의 스레드가 번갈아가면서 실행되는 성질을 말합니다.
- 병렬성 : 코어가 여러개여서 여러 작업을 동시에 처리하는 것을 의미합니다.

**스택오버플로우란 무엇인가?**

- 스택 영역의 메모리가 지정된 범위를 벗어나는 것을 의미합니다.
- **꼬리질문**
    - **스택오버플로우는 어떨 때 발생하는가?**
        
        함수에서 너무 큰 지역 변수를 선언하거나 함수를 재귀적으로 호출할 경우 발생할 수 있습니다. 
        
        스택 오버플로우는 변수 크기 초과, 함수 호출 깊이 초과, 무한 루프, 예외 처리 미흡 등으로 인해 메모리 한계를 초과하거나 프로그램이 제대로 종료되지 않을 때 발생합니다.