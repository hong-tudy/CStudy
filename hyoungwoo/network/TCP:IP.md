### IP (인터넷 프로토콜)

- 지정한 IP 주소에 데이터의 조각들을 패킷(Packet)이라는 통신 단위로 최대한 빨리 목적지로 보내는 역할.
- 조각들의 순서가 뒤바뀌거나 일부가 누락되어도 크게 상관하지 않고 보내는데 집중
- 패킷의 순서 보장을 할 수 없고 패킷이 중간에 유실되어도 방안이 없음
- MAC와의 비교
  - MAC
    - 데이터 링크 계층에서 사용되는 하드웨어 주소
    - 네트워크 인터페이스 카드(NIC)에 고유하게 할당된 48비트 주소로, 제조사에 의해 장치에 영구적으로 할당
    - 48비트로 구성되며, 일반적으로 6쌍의 16진수, 주소의 처음 3바이트는 제조사 식별자이고, 나머지 3바이트는 장치 고유 식별자
    - 네트워크 내에서 장치를 고유하게 식별하고, 이더넷 프레임의 출발지와 목적지를 식별하는 데 사용
    - 로컬 네트워크 내에서 패킷을 전달하는 데 사용
  - IP
    - 네트워크 계층에서 사용되는 논리적 주소
    - 네트워크에서 장치들이 서로 통신할 수 있도록 식별하는 주소로, 네트워크 관리자나 자동 IP 할당 시스템(DHCP)에 의해 동적으로 할당, 네트워크에 따라 동적으로 할당되거나 수동으로 설정
    - IPv4 주소는 32비트, IPv6 주소는 128비트
    - 네트워크 간의 통신에서 장치들을 식별하고, 패킷의 출발지와 목적지를 지정하는 데 사용
    - 인터넷과 같은 대규모 네트워크에서 데이터 전송 경로를 결정하는 데 사용
- 공인 IP vs 사설 IP
  - 공인 IP
    - 인터넷에 직접 연결된 네트워크 장치에 할당되는 고유한 IP 주소
    - 인터넷 서비스 제공자(ISP)나 IANA(Internet Assigned Numbers Authority)와 같은 공인된 기관에 의해 할당
    - 전 세계적으로 유일하며, 인터넷을 통해서 다른 장치들과 통신할 때 사용
  - 사설 IP
    - 내부 네트워크에서 사용되는 IP 주소로, 인터넷에서는 직접 접근할 수 없는 주소
    - 가정이나 기업의 로컬 네트워크에서 사용
    - 로컬 네트워크에서 할당되며 다른 네트워크의 IP 주소와 중복 가능
      - 동일한 로컬 네트워크에 연결된 장치에는 같은 사설 IP 주소를 할당할 수 없음
    - 외부 통신을 위해서는 NAT와 같은 기술이 필요
- IPv4 vs IPv6
  | IPv4 | IPv6 |
  | ------------------- | ---------------------------------------------------------------------------------- |
  | 무엇인가요? | 인터넷 프로토콜 버전 4 |
  | 주소 크기 | 32비트 또는 232개의 IP 주소 |
  | 명명 표준 | 숫자형 IP 주소. 마침표로 구분된 세 자리 숫자의 4개 묶음. |
  | 197.0.0.1 |
  | 루프백 주소 | 127.0.0.1 |
  | 주소 변환 필요 여부 | 예, Network Address Translation(NAT)을 통해 변환 |
  | 패킷 주소 지정 | 유니캐스트, 브로드캐스트, 멀티캐스트 |
  | 주소 구성 | 수동 및 DHCP 구성 |
  | 헤더 크기 | 변수, 20바이트, 선택적 필드 및 플래그가 추가될 때 최대 60바이트까지 증가할 수 있음 |
  | 헤더 체크섬 | 예 |
  | 추가 옵션 | 옵션 컨트롤에 대한 제한적 지원 |
  | 개인 정보 보호 정책 | 주소의 마지막 8비트를 숨기는 IP 주소 마스킹 |
  | 프래그먼테이션 | 라우터에서 처리 |
  | DNS 해결 방법 | A 레코드 |
  | 라우팅 효율성 | 헤더에서 처리 |
  | 모바일 지원 | 모바일 IP 필요 |
  - IP 주소는 인터넷 프로토콜을 사용하는 네트워크에서 장치들을 식별하기 위한 고유한 주소
  - 인터넷 및 사물 인터넷(IoT) 시스템의 확장으로 인해 IPv4의 주소 지정 범위가 충분하지 않아 IPv6으로 단계적 대체
  - 유사점
    - 지정된 명명 시스템
      - 모든 디바이스의 이름을 고유하게 지정하거나 식별할 수 있도록 설계
    - 코어 프로토콜
      - TCP/IP 프로토콜 제품군
    - 비연결 데이터 전송
      - 다중 패킷 라우팅을 사용하여 데이터를 작은 블록으로 분할한 후 인터넷을 통해 전송하는 비연결 프로토콜
      - 각 패킷이 사용하는 경로를 결정
      - 동일한 데이터의 패킷이 서로 다른 인터넷 트래픽 경로를 사용하여 인터넷을 통해 전송
      - 수신 디바이스에서 패킷이 올바른 순서로 재구성
      - OSI 모델의 전송 계층에서 TCP 또는 UDP에 의해 수행
  - 차이점
    - 주소 공간
      - IPv4의 전체 주소 공간은 2³², 즉 42억 9,496만 7,296개의 IP 주소
      - IPv6의 주소 공간은 2¹²⁸, 3.403×10³ 또는 340,282,366,920,938,000,000,000,000,000,000,000,000개의 고유 IP 주소로 훨씬 큼
    - 명명
      - IPv4에서 주소 이름은 4개의 10진수로 이루어진 숫자 주소(0~255 범위)로 표시되며, 각 숫자는 8비트를 나타내고 세 개의 마침표로 구분
      - IPv6에서 주소 이름은 숫자(0~9)와 문자(A~F)로 구성된 8개의 16진수로 표시되며, 각 숫자는 4비트를 나타내고 콜론으로 구분
    - 커뮤니케이션 유형
      - IPv4는 다중 패킷 라우팅을 통한 일대일(유니캐스트), 일 대 전부(브로드캐스트) 및 일대다(멀티캐스트) 주소 지정을 지원
      - IPv6에서는 멀티 패킷 라우팅을 통해 유니캐스트, 멀티캐스트 및 애니캐스트 주소 지정을 지원
        - 애니캐스트 통신에서 데이터 패킷은 단일 발신자로부터 동일한 애니캐스트 주소를 공유하는 여러 수신자 중 가장 가까운 수신자로 전송
        - ‘가장 가까운 거리’는 대상에 도달하기 위한 최단 경로 또는 최저 비용을 계산하는 라우팅 프로토콜에 의해 결정
  - 개선점
    - IPv4의 경우 정상적으로 작동하려면 Network Address Translation(NAT)이 필요하기 때문에 IPv6는 기본적으로 IPv4보다 성능이 더 뛰어남
      - IPv6를 사용하면 NAT가 더 이상 필요하지 않으므로, 변환에 따른 성능 오버헤드가 해소
    - 자동 구성
      - IPv4를 사용하는 경우 IP 주소 할당을 처리하고 네트워크에 연결된 시스템을 식별하려면 Dynamic Host Configuration Protocol(DHCP) 서버가 필요
      - IPv6에는 디바이스 자체가 외부 파티나 프로토콜 없이 자체 주소를 자동 구성할 수 있는 Stateless Address Autoconfiguration(SLAAC)가 사용
        - DHCP가 필요 없기 때문에 네트워크의 전체 트래픽도 줄어듬
    - 경로 계산
      - IPv6는 IPv4보다 더 효율적으로 인터넷을 통한 라우팅을 지원하는 기능을 제공
      - NAT 제거, 라우팅 헤더 간소화, Neighborhood Discovery Protocol(NDP), 계층형 주소 지정 및 서브넷 지정, 경로 집계가 포함
    - 보안
      - IPv6는 IPv4보다 프로토콜의 보안이 더 강화
        - 기본적으로 인터넷 프로토콜 보안(IPsec), 프라이버시 확장을 포함하는 기능, OSPFv3와 같은 추가 보안 라우팅 프로토콜이 포함
  - IPv6는 IPv4에 비해 개선되었음에도 불구하고, 대부분의 인터넷은 여전히 IPv4에서 실행

### TCP (전송 제어 프로토콜)

- 패킷 데이터 전달을 보증하고 보낸 순서대로 받게 해줌
- 도착한 패킷을 점검하여 줄을 세우고 망가졌거나 빠진 조각을 다시 요청하는 식으로 보증
- 상대방에게 확실하게 데이터를 보내기 위해 3 way 핸드쉐이킹 기법 사용
  - SYN와 ACK라는 TCP 플래그 사용
  - SYN : 접속 요청
  - ACK : 요청 수락
- IP의 문제 보완
- 데이터를 신뢰성 있게 전송하기 위한 기능
  - 흐름 제어
    - 수신측이 송신측보다 데이터 처리 속도가 빠르면 문제없지만, 송신측의 속도가 빠를 경우 문제가 생김
    - 수신측에서 제한된 저장 용량을 초과한 이후에 도착하는 데이터는 손실 될 수 있으며, 만약 손실 된다면 불필요하게 응답과 데이터 전송이 송/수신 측 간에 빈번이 발생
    - 송신 측의 데이터 전송량을 수신측에 따라 조절
    - 방법
      - **Stop and Wait** : 매번 전송한 패킷에 대해 확인 응답을 받아야만 그 다음 패킷을 전송하는 방법
      - **Sliding Window** (Go Back N ARQ)
        - 수신측에서 설정한 윈도우 크기만큼 송신측에서 확인응답없이 세그먼트를 전송할 수 있게 하여 데이터 흐름을 동적으로 조절하는 제어기법
        - 목적 : 전송은 되었지만, acked를 받지 못한 byte의 숫자를 파악하기 위해 사용하는 protocolLastByteSent - LastByteAcked <= ReceivecWindowAdvertised(마지막에 보내진 바이트 - 마지막에 확인된 바이트 <= 남아있는 공간) ==(현재 공중에 떠있는 패킷 수 <= sliding window)
        - **동작방식** : 먼저 윈도우에 포함되는 모든 패킷을 전송하고, 그 패킷들의 전달이 확인되는대로 이 윈도우를 옆으로 옮김으로써 그 다음 패킷들을 전송
        - **Window** : TCP/IP를 사용하는 모든 호스트들은 송신하기 위한 것과 수신하기 위한 2개의 Window를 가지고 있다. 호스트들은 실제 데이터를 보내기 전에 '3 way handshaking'을 통해 수신 호스트의 receive window size에 자신의 send window size를 맞추게 된다.
  - 혼잡 제어
    - 송신측의 데이터는 지역망이나 인터넷으로 연결된 대형 네트워크를 통해 전달
    - 한 라우터에 데이터가 몰릴 경우, 자신에게 온 데이터를 모두 처리할 수 없게 됨
    - 네트워크의 혼잡을 피하기 우해 송신측에서 보내는 데이터의 전송속도를 강제로 줄임
    - 방법
      ![](https://t1.daumcdn.net/cfile/tistory/256E39425715F10103)
      - **AIMD(Additive Increase / Multiplicative Decrease)**처음에 패킷을 하나씩 보내고 이것이 문제없이 도착하면 window 크기(단위 시간 내에 보내는 패킷의 수)를 1씩 증가시켜가며 전송하는 방법패킷 전송에 실패하거나 일정 시간을 넘으면 패킷의 보내는 속도를 절반으로 줄인다.공평한 방식으로, 여러 호스트가 한 네트워크를 공유하고 있으면 나중에 진입하는 쪽이 처음에는 불리하지만, 시간이 흐르면 평형상태로 수렴하게 되는 특징이 있다.문제점은 초기에 네트워크의 높은 대역폭을 사용하지 못하여 오랜 시간이 걸리게 되고, 네트워크가 혼잡해지는 상황을 미리 감지하지 못한다. 즉, 네트워크가 혼잡해지고 나서야 대역폭을 줄이는 방식이다.
      - **Slow Start (느린 시작)**AIMD 방식이 네트워크의 수용량 주변에서는 효율적으로 작동하지만, 처음에 전송 속도를 올리는데 시간이 오래 걸리는 단점이 존재했다.Slow Start 방식은 AIMD와 마찬가지로 패킷을 하나씩 보내면서 시작하고, 패킷이 문제없이 도착하면 각각의 ACK 패킷마다 window size를 1씩 늘려준다. 즉, 한 주기가 지나면 window size가 2배로 된다.전송속도는 AIMD에 반해 지수 함수 꼴로 증가한다. 대신에 혼잡 현상이 발생하면 window size를 1로 떨어뜨리게 된다.처음에는 네트워크의 수용량을 예상할 수 있는 정보가 없지만, 한번 혼잡 현상이 발생하고 나면 네트워크의 수용량을 어느 정도 예상할 수 있다.그러므로 혼잡 현상이 발생하였던 window size의 절반까지는 이전처럼 지수 함수 꼴로 창 크기를 증가시키고 그 이후부터는 완만하게 1씩 증가시킨다.
      - **Fast Retransmit (빠른 재전송)**빠른 재전송은 TCP의 혼잡 조절에 추가된 정책이다.패킷을 받는 쪽에서 먼저 도착해야할 패킷이 도착하지 않고 다음 패킷이 도착한 경우에도 ACK 패킷을 보내게 된다.단, 순서대로 잘 도착한 마지막 패킷의 다음 패킷의 순번을 ACK 패킷에 실어서 보내게 되므로, 중간에 하나가 손실되게 되면 송신 측에서는 순번이 중복된 ACK 패킷을 받게 된다. 이것을 감지하는 순간 문제가 되는 순번의 패킷을 재전송 해줄 수 있다.중복된 순번의 패킷을 3개 받으면 재전송을 하게 된다. 약간 혼잡한 상황이 일어난 것이므로 혼잡을 감지하고 window size를 줄이게 된다.
      - **Fast Recovery (빠른 회복)**혼잡한 상태가 되면 window size를 1로 줄이지 않고 반으로 줄이고 선형증가시키는 방법이다. 이 정책까지 적용하면 혼잡 상황을 한번 겪고 나서부터는 순수한 AIMD 방식으로 동작하게 된다.

### **TCP 3 way handshake**

- 본격적으로 상대 클라이언트와 연결되기 전에 가상 연결을 해서 패킷으로 보내서 확인하는 동작
- 과정
  - 클라이언트는 서버에 SYN 패킷을 보내며 연결 요청
  - 서버는 클라이언트의 요청에 응답하여 SYN과 ACK 패킷을 함께 전송
  - 클라이언트는 서버의 응답을 확인한 후 ACK 패킷과 함께 데이터를 전송
  - 데이터 패킷 전송
- TCP 데이터 안에 전송 제어, 순서, 정보가 있기 때문에 순서를 제어할 수 있음

### **4-way Handshaking**

- 세션을 종료하기 위해 수행되는 절차
- 과정
  - 클라이언트가 연결을 종료하겠다는 FIN플래그를 전송. **클라이언트는  FIN-WAIT** 상태
  - 서버는 FIN플래그를 받고, 일단 확인메시지 ACK 보내고 자신의 통신이 끝날때까지 기다리는데 이 상태 가 CLOSE_WAIT상태
  - 연결을 종료할 준비가 되면, 연결해지를 위한 준비가 되었음을 알리기 위해 클라이언트에게 FIN플래그를 전송. 서버의 상태는 **LAST-ACK**
  - 클라이언트는 해지준비가 되었다는 ACK를 확인했다는 메시지를 보냄. **클라이언트의 상태가 FIN-WAIT ->TIME-WAIT** 으로 변경
- TIME_WAIT
  - Server에서 FIN을 전송하기 전에 전송한 패킷이 Routing 지연이나 패킷 유실로 인한 재전송 등으로 인해 FIN패킷보다 늦게 도착하는 상황이 발생하면?
  - Client에서 세션을 종료시킨 후 뒤늦게 도착하는 패킷이 있다면 이 패킷은 Drop되고 데이터는 유실
  - 이러한 현상에 대비하여 Client는 Server로부터 FIN을 수신하더라도 일정시간(디폴트 240초) 동안 세션을 남겨놓고 잉여 패킷을 기다리는 과정

### **TCP 순서 보장 방법**

- 클라이언트에서 패킷1, 패킷2, 패킷3 순서로 전송
- 서버에서 패킷1, 패킷3, 패킷2 순서로 받음
- 서버에서 패킷2번부터 다시 보내라고 클라이언트에게 요청(TCP 기본 동작)

### TCP/IP 4계층

- 인터넷 프로토콜 스위트(Internet Protocol Suite)로 알려진 인터넷과 대부분의 네트워크에서 사용되는 프로토콜 스택
- 계층 구분을 통해 각 기능들은 서로 간의 간섭을 최소화할 있고 유지와 보수에 편리하다는 이점
  - 구분을 통해 어떤 계층이 문제인지 찾고 보수하는 것이 간편
- L5 응용 계층 (Application Layer)
  - 사용자와 가장 가까운 계층으로 사용자 - 소프트웨어 간소통을 담당하는 계층
  - 웹 프로그래밍을 하면서 흔히 접하는 여러 서버나 클라이언트 관련 응용 프로그램들이 동작하는 계층
  - 응용프로그램끼리의 데이터 송수신
  - 데이터 단위는 Data/Message
  - 예시
    - FTP는 파일 전송을, HTTP는 웹 페이지 전송을, DNS는 도메인 이름을 IP 주소로 변환하는 서비스를 제공
- L4 전송 계층 (Transport Layer)
  - 네트워크 상의 호스트 간 데이터 전송을 담당
  - 통신 노드 간의 데이터 전송 및 흐름에 있어 신뢰성을 보장
  - 데이터 단위 Segment
  - 전송 주소 Port
  - 예시
    - TCP
      - 신뢰성 있는 데이터 전송을 위해 연결 설정, 데이터 확인 및 오류 복구를 포함한 복잡한 제어 기능을 제공
      - 연결 지향형 프로토콜로 패킷에 하나의 오류라도 있으면 재전송을 위해 에러를 복구
    - UDP
      - 단순히 데이터그램을 보내며, 신뢰성이나 순서 보장을 제공하지 않지만 속도가 빠름
      - 패킷을 중간에 잃거나 오류가 발생해도 이에 대처하지 않고 계속해서 데이터를 전송
- L3 네트워크 계층 (Network Layer)
  - 네트워크 상에서 데이터의 전송을 담당하는 계층으로 서로 다른 네트워크 간의 통신을 가능하게 하는 역할을 수행
  - 데이터 전송을 위한 논리적 주소 및 경로 지정
  - 데이터 단위 Packet
  - 단말을 구분하기 위해 논리적인 주소로 IP 주소를 할당하게 되고 이 **IP 주소**로 네트워크 상의 컴퓨터를 식별하여 주소를 지정
  - 예시
    - IP는 주소 지정과 패킷 라우팅을, ARP는 IP 주소를 MAC 주소로 변환을, ICMP는 네트워크 진단과 오류 메시지 처리를, RARP는 MAC 주소를 IP 주소로 변환을 담당
    - 라우팅
      - 네트워크 내에서 데이터 패킷을 최적의 경로를 따라 목적지로 전달하는 과정
  - 장비
    - 라우터
      - 네트워크끼리 연결하고 데이터를 전송하는 기기
      - 내부의 라우팅 테이블(Routing Table)을 통해 경로 정보를 등록하여 **데이터 전송을 위한 최적의 경로를 찾음**
- L2 데이터 계층
  - 같은 네트워크 내에서 데이터의 신뢰성 있는 전송을 담당
  - 실제 데이터인 프레임 송수신
  - 기본적인 에러 검출과 패킷의 Frame화를 담당
  - 데이터 단위 Frame
  - 전송 주소 MAC
    - 네트워크 인터페이스 컨트롤러(NIC) 또는 네트워크 장치에 할당된 고유 식별자
    - 논리적인 주소가 아닌 물리적인 주소인 MAC을 참조해 장비간 전송
  - 예시
    - LAN, 패킷망
  - 장비
    - 브릿지, 스위치, 네트워크 어댑터(NIC), 허브
- L1 물리 계층 (Physical Layer)
  - **기능:** 물리 계층은 네트워크의 가장 낮은 계층으로, 실제 데이터의 물리적 전송을 담당
  - 데이터의 전기적, 광학적 또는 전자기적 신호로 변환하여 네트워크 매체를 통해 비트를 전송
  - **데이터 단위:** 비트 (또는 심볼)
  - **전송 주소**
    - 물리 계층에서는 전송 주소 개념이 없으며, 데이터의 전송은 물리적 신호를 통해 이루어짐
  - **기술**
    - 신호의 전송 속도, 신호의 형태, 케이블의 종류(구리선, 광섬유 등), 전압 레벨, 데이터 전송의 동기화 등을 규정
  - **예시**
    - 전기 신호, 광신호, 케이블(구리선, 광섬유), 전송 매체
  - **장비**
    - 허브, 리피터, 네트워크 카드(NIC), 모뎀

### OSI 7계층과의 차이점

![](https://velog.velcdn.com/images/dyunge_100/post/c1fdb43d-7f7e-4613-9526-a15b01fa9546/image.png)

- **OSI 7계층 모델**
  - **개념적 모델**로, 데이터 통신 시스템의 기능을 7개의 계층으로 구분하여 각 계층의 역할을 정확하게 정의
  - 각 계층은 특정한 기능을 담당하며, 상위 계층은 하위 계층의 서비스를 사용. 이 모델은 네트워크 설계 및 이해를 돕기 위한 **이론적 프레임워크**로, 교육과 연구에서 널리 사용
  - **7계층**으로 구성되며, 물리, 데이터 링크, 네트워크, 전송, 세션, 표현, 응용 계층으로 나뉨 각 계층은 명확한 역할을 가지고 있으며, 상호 독립적으로 설계
- **TCP/IP 5계층 모델**
  - **실무적 모델**로, 인터넷 프로토콜 스위트(Internet Protocol Suite). 이 모델은 인터넷과 대부분의 네트워크에서 실제로 사용되는 **프로토콜 중심의 모델**
  - OSI 모델보다 **단순화**된 구조로, 실질적인 네트워크 프로토콜 구현에 초점 인터넷 프로토콜(IP)과 전송 제어 프로토콜(TCP) 등이 이 모델의 핵심
  - **5계층**으로 구성되며, 물리 계층, 데이터 계층, 네트워크 계층, 전송 계층, 응용 계층으로 나뉨. 이는 실제 네트워크 환경에서 사용되는 프로토콜들의 기능을 기반으로 계층을 나눈 것
- 물리 계층
  - OSI 7계층에서 물리 계층
  - 물리층은 개별 `비트`들을 한 노드에서 다음 노드로 전달하는 역할
- 데이터 계층
  - OSI 7계층에서 데이터 계층
  - 알맞은 하드웨어로 데이터가 전달되도록 MAC주소를 핸들링 하는것 뿐 아니라, 데이터 패킷을 전기신호로 변환하여 선로를 통하여 전달할 수 있게 준비
- 네트워크 계층
  - OSI 7계층에서 네트워크 계층
  - IP를 담당하여 데이터의 원천지와 목적지에 대한 정보를 첨부
- 전송 계층
  - OSI 7계층에서 전송 계층
  - **TCP / UDP**를 담당하는 계층
  - 순서가 맞지 않거나 중간에 빠진 부분을 점검하여 다시 요청하는 일을 담당
- 응용 계층
  - OSI 7계층에서 세션, 표현, 응용 계층
  - 서버나 클라이언트 응용 프로그램이 동작

### **TCP / IP 4계층 동작 순서**

![](https://velog.velcdn.com/images/dyunge_100/post/12e91f10-388c-415d-a3bb-8e452f49c6bf/image.png)

- 송신측 클라이언트의 애플리케이션 계층에서 어느 웹 페이지를 보고 싶다라는 HTTP 요청을 지시
- 그 다음에 있는 트랜스포트 계층에서는 애플리케이션 계층에서 받은 데이터(HTTP 메시지)를 통신하기 쉽게 조각내어 안내 번호와 포트 번호(TCP 패킷)를 붙여 네트워크 계층에 전달
- 네트워크 계층에서 데이터에 IP 패킷을 추가해서 링크 계층에 전달
- 링크 계층에서는 수신지 MAC 주소와 이더넷 프레임을 추가
- 네트워크를 통해 송신할 준비
- 수신측 서버는 링크 계층에서 데이터를 받아들여 순서대로 위의 계층에 전달하여 애플리케이션 계층까지 도달
- 수신측 애플리케이션 계층에 도달하게 되면 클라이언트가 발신했던 HTTP 리퀘스트를 수신

### UDP

- 비연결지향적 프로토콜
- 데이터 전달 보증하지 않음
- 순서를 보장하지 않음
- TCP에 비해서 기능이 거의 없어 단순하지만 오로지 빠르게 패킷을 보내는 목적
- IP와 거의 같음, PORT와 체크섬(메세지 검증해주는 데이터) 정도만 추가된 형태
- IP에 기능이 거의 추가되지 않은 상태이기 때문에 최적화 및 커스터마이징이 용이

### TCP Vs UDP

| 특성                   | TCP                              | UDP                                 |
| ---------------------- | -------------------------------- | ----------------------------------- |
| 연결 방식              | 연결지향형 프로토콜              | 비 연결지향형 프로토콜              |
| 데이터 전송 방식       | 바이트 스트림을 통한 연결        | 메세지 스트림을 통한 연결           |
| 혼잡 제어 및 흐름 제어 | 혼잡제어, 흐름제어               | 혼잡제어와 흐름제어 지원 X          |
| 순서 보장              | 순서 보장, 상대적으로 느림       | 순서 보장되지 않음, 상대적으로 빠름 |
| 신뢰성                 | 신뢰성 있는 데이터 전송 - 안정적 | 데이터 전송 보장 X                  |
| 데이터 단위            | 세그먼트 (TCP 패킷)              | 데이터그램 (UDP 패킷)               |
| 사용 예                | HTTP, Email, File transfer       | 도메인, 실시간 동영상 서비스        |

### 네이버 접속 시나리오

1. 웹 브라우저에 www.naver.com 입력
2. DNS로 네이버 서버 IP주소 할당.
3. 응용 계층(L4)에서 메세지 데이터 패킹(HTTP 메시지)
4. 전송 계층(L3)에서 PORT정보(출발지, 목적지), 전송제어 정보, 순서 정보, 검증 정보 패킹 (TCP)
   - 라우터
     - 네트워크 계층(OSI 모델의 3계층)에서 작동하며, 다른 네트워크 간의 데이터 전송을 관리하고 경로를 결정하는 역할
     - IP 주소를 사용하여 데이터 패킷의 목적지를 확인하고, 최적의 경로를 선택하여 패킷을 다음 네트워크로 전달
     - 서로 다른 네트워크, 예를 들어 로컬 네트워크와 인터넷 간의 연결을 가능하게 함
     - 네트워크 간의 트래픽을 관리하고, 다양한 라우팅 프로토콜을 사용하여 경로를 동적으로 조정
     - 라우팅 테이블
       - 네트워크에서 목적지 주소를 목적지에 도달하기 위한 네트워크 노선으로 변환시키는 목적
       - 구성요소
         - 목적지 주소
           - 목적지 네트워크 주소
           - 라우터는 자원 절약을 위해, 호스트 주소 단위가 아닌 목적지 네트워크 단위로 저장 관리
           - 목적지 네트워크 : 목적지 네트워크에 대한 여러 관련 정보(IP주소, 서브넷 등)
         - Next-Hop 인터페이스
           - (방향 ) 패킷의 입출력 관계
           - 목적지 네트워크 주소로 가기 위한 라우터의 출구 포트에 대한 정보
           - Next Hop 주소 : 목적지 네트워크까지 가기 위한 바로 다음의 라우터 IP 주소
         - Administrative Distance
           - 목적지 라우팅을 위한 메트릭 정보
           - 보통 6개정도까지의 최적 루트를 계산해내며 이들 사이 트래픽을 로드밸런싱함
           - 만일 동일 목적지 경로에 대한 정보가 인접 라우터들로부터 여럿 수신될 때 비용이 더 적게 소요되는 기준값 정보 취함
           - 결국 모든 목적지 네트워크마다 최적 경로가 결정된 표 만들게 됨
           - 각 원격 네트워크 경로에 대해 계산된 어떤 수치 값을 가짐
         - Metric
           - 라우팅 메트릭 : 최적 경로 서열 값
5. 인터넷 계층(L2)에서 IP정보(출발지, 목적지) 패킹
6. 네트워크 엑세스(L1) 계층에서 MAC주소 패킹
7. 게이트웨이를 통해 인터넷망 접속.
8. 라우터를 통해 목적지(네이버 서버)를 찾아 연결.
9. 네이버 서버에 도착하면 패킷을 하나 하나 까면서 목적 포트에 메세지 데이터 전달하여 다시 응답

[웹 브라우저에 URL을 입력하면 어떤 일이 생기나요? | Amazon Web Services](https://aws.amazon.com/ko/blogs/korea/what-happens-when-you-type-a-url-into-your-browser/)

### 라우터와 스위치

- 스위치
  - 데이터 링크 계층(OSI 모델의 2계층)에서 작동하며, 같은 네트워크 내의 장치들 간에 데이터를 전달하는 역할
  - MAC 주소를 기반으로 각 장치가 연결된 포트를 기억하고, 데이터 프레임을 적절한 포트로 전달하여 효율적인 데이터 전송을 가능하게함
  - 데이터 패킷을 네트워크 내에서만 전달하므로, 주로 LAN(Local Area Network)에서 사용
  - 스위치는 네트워크 효율성을 높이고, 충돌 도메인을 분할하여 네트워크 성능을 향상
- **라우터**
  - 작동 계층
    - 네트워크 계층(OSI 모델의 3계층)에서 작동하며, 서로 다른 네트워크 간에 데이터를 전달하는 역할
  - 기능
    - IP 주소를 기반으로 패킷의 출발지와 목적지를 확인하고, 최적의 경로를 선택하여 데이터를 전송
    - 이를 통해 다양한 네트워크를 연결하고, 인터넷과 같은 광범위한 네트워크 환경에서 통신을 가능하게 합니다.
  - 데이터 전송
    - 라우터는 데이터 패킷을 네트워크 간에 전달하므로, WAN(Wide Area Network) 또는 인터넷 환경에서 주로 사용
  - 네트워크 관리
    - 라우터는 네트워크 트래픽을 관리하고, 네트워크 간의 충돌을 방지하며, NAT(Network Address Translation) 및 방화벽 기능을 통해 보안성을 높이는 역할도 수행
